(()=>{var y=document.getElementById("canvas"),I=document.getElementById("txt_area"),v=[[50,20],[50,30],[50,40],[70,50],[50,60],[50,70],[50,80]],g=[[50,20],[50,30],[50,40],[50,60],[50,70],[50,80]];function b(t,o,s,a=.5){let f=t.length-2,u=o?t[o-1]:t[0],h=t[o],d=t[o+1],m=o<f?t[o+2]:d,n=-u[0]+3*h[0]-3*d[0]+m[0],i=-u[1]+3*h[1]-3*d[1]+m[1],l=2*u[0]-5*h[0]+4*d[0]-m[0],c=2*u[1]-5*h[1]+4*d[1]-m[1],r=-u[0]+d[0],x=-u[1]+d[1],E=2*h[0],L=2*h[1],T=(n*s**3+l*s**2+r*s+E)*a,S=(i*s**3+c*s**2+x*s+L)*a;return[T,S]}function M(t,o,s,a){return Math.abs((t[0]*o[1]-t[1]*o[0]+(o[0]*s[1]-o[1]*s[0])+(s[0]*a[1]-s[1]*a[0])+(a[0]*t[1]-a[1]*t[0]))/2)}var e=y.getContext("2d");function P(){e.clearRect(0,0,y.width,y.height);let t=10;{let n=-1,i=-1;for(let l=0;l<v.length-1;l++){e.fillStyle="rgb(100, 220, 100)",e.beginPath(),e.text,e.arc(v[l][0]*10,v[l][1]*10,10,0,2*Math.PI),e.fill();for(let c=0;c<t;c++){let[r,x]=b(v,l,c/t);n!==-1&&i!==-1&&(e.strokeStyle="blue",e.lineWidth=4,e.beginPath(),e.moveTo(n*10,i*10),e.lineTo(r*10,x*10),e.stroke()),n=r,i=x}}n=-1,i=-1;for(let l=0;l<g.length-1;l++){e.fillStyle="rgb(100, 220, 100)",e.beginPath(),e.text,e.arc(g[l][0]*10,g[l][1]*10,10,0,2*Math.PI),e.fill();for(let c=0;c<t;c++){let[r,x]=b(g,l,c/t);n!==-1&&i!==-1&&(e.strokeStyle="blue",e.lineWidth=4,e.beginPath(),e.moveTo(n*10,i*10),e.lineTo(r*10,x*10),e.stroke()),n=r,i=x}}}let o=1,s=[],a=[];for(let n=0;n<4;n++){s.push(v[o+n]);for(let i=1;i<t;i++){let[l,c]=b(v,o+n,i/t);s.push([l,c])}}s.push(v[o+4]);for(let n=0;n<3;n++){a.push(g[o+n]);let i=t;n==1&&(i*=2);for(let l=1;l<i;l++){let[c,r]=b(g,o+n,l/i);a.push([c,r])}}a.push(g[o+3]);let f=-1,u=-1,h=-1,d=-1,m=0;for(let n=0;n<s.length;n++){let[i,l]=s[n];e.fillStyle="blue",e.beginPath(),e.arc(i*10,l*10,5,0,2*Math.PI),e.fill();let[c,r]=a[n];e.fillStyle="red",e.beginPath(),e.arc(c*10,r*10,5,0,2*Math.PI),e.fill(),f!=-1&&(e.fillStyle="orange",e.beginPath(),e.moveTo(f*10,u*10),e.lineTo(i*10,l*10),e.lineTo(c*10,r*10),e.lineTo(h*10,d*10),e.fill(),m+=M([f,u],[h,d],[c,r],[i,l])),f=i,u=l,h=c,d=r}I.textContent=Math.round(m*100)/100}P();function w(t){let o=y.getBoundingClientRect(),s=100/o.width,a=t.clientX-o.left,f=t.clientY-o.top;v[3]=[a*s,f*s],P()}function _(t){w(t.touches[0])}y.addEventListener("touchstart",t=>{t.preventDefault(),_(t),window.addEventListener("touchmove",_),window.addEventListener("touchend",()=>{window.removeEventListener("touchmove",_)})});y.addEventListener("mousedown",t=>{t.preventDefault(),w(t),window.addEventListener("mousemove",w),window.addEventListener("mouseup",()=>{window.removeEventListener("mousemove",w)})});})();
